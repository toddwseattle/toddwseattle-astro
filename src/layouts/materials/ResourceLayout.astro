---
import type { CollectionEntry } from 'astro:content';
import Container from '../../components/ui/Container';

interface Props {
  entry: CollectionEntry<'course-materials'>;
  rendered: Awaited<ReturnType<CollectionEntry<'course-materials'>['render']>>;
}

const { entry, rendered } = Astro.props as Props;
const resources = (entry.data as any).resources || [];
---

<article class="py-16">
  <Container>
    <div class="max-w-4xl mx-auto">
      <div class="prose prose-lg dark:prose-invert max-w-none">
        <rendered.Content />
      </div>

      <section class="mt-12">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">Resources</h2>
        {resources.length === 0 ? (
          <p class="text-gray-600 dark:text-gray-300">No resources listed yet.</p>
        ) : (
          <div class="overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700">
            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
              <thead class="bg-gray-50 dark:bg-gray-800">
                <tr>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider">Resource</th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider">Description</th>
                </tr>
              </thead>
              <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
                {resources.map((r: any) => (
                  <tr>
                    <td class="px-6 py-4">
                      <a href={r.url} target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 hover:underline font-medium">
                        {r.title} â†’
                      </a>
                    </td>
                    <td class="px-6 py-4 text-gray-700 dark:text-gray-300">
                      {r.description || ''}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        )}
      </section>
    </div>
  </Container>
</article>
